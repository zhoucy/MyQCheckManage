<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
<c:set var="ctx" value="${pageContext.request.contextPath }" />
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  </head>
  
  <body>
	<table id="todayorder" class="easyui-datagrid" style="width:894px;height:280px" rownumbers="true" title="今天生产中的订单"
		data-options="url:'${ctx}/qc/getTodeyOrderOfIndex.do',fitColumns:true,singleSelect:true">
		<thead>
			<tr>
				<th field="pono" width="100" align="center">订单编号</th>			
				<th field="pre_shipment_date" width="100" align="center" formatter="formatPredate">预出货日期</th>
				<th field="temp" width="100" align="center" formatter="formatSchedule">进度</th>
				<th field="product_name" width="100" align="center">产品类型</th>
				<th field="order_number" width="100" align="center">订单数量</th>
				<th field="finish_number" width="100" align="center">完成数量</th>
				<th field="product_status" width="100" align="center" formatter="formatStatus">生产状态</th>			
			</tr>
		</thead>
	</table>
<script type="text/javascript">
function formatPredate(value,row,index){
   var today=new Date().getTime();
   var orderday=new Date(value).getTime();
   if(orderday<today){
       return '<span style="color:red">'+value+'</span>';
   }else if(orderday-today<86400000){
      return '<span style="color:blue">'+value+'</span>';
   }else{
     return '<span style="color:green">'+value+'</span>';
   }   
}
function formatSchedule(value,row,index) {
    var temp=100*row.finish_number/row.order_number;
    var schedule=temp.toFixed(2);
    var color="";  
    if(temp>=80){
       color="color:green;";
    }else{
       color="color:red;";
    }
    return '<span style='+color+'>'+schedule+'%</span>';   
}
function formatStatus(value,row,index) {
   return value;
}
</script>
</body>
</html>
